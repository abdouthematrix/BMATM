<Window
    x:Class="BMATM.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:system="clr-namespace:System;assembly=mscorlib"
    xmlns:views="clr-namespace:BMATM.Views"
    xmlns:vm="clr-namespace:BMATM.ViewModels"
    Title="{Binding WindowTitle}"
    Width="1000"
    Height="700"
    MinWidth="800"
    MinHeight="600"
    Icon="app-icon.ico"
    WindowStartupLocation="CenterScreen"
    WindowState="Normal"
    mc:Ignorable="d">

    <Window.Resources>
        <!--  ViewModelLocator - Maps ViewModels to Views  -->
        <DataTemplate DataType="{x:Type vm:LoginViewModel}">
            <views:LoginView />
        </DataTemplate>

        <DataTemplate DataType="{x:Type vm:ATMCarouselViewModel}">
            <views:ATMCarouselView />
        </DataTemplate>

        <DataTemplate DataType="{x:Type vm:CashReconciliationViewModel}">
            <views:CashReconciliationView />
        </DataTemplate>

        <DataTemplate DataType="{x:Type vm:GLReconciliationViewModel}">
            <views:GLReconciliationView />
        </DataTemplate>

        <!--  Window Style  -->
        <Style TargetType="Window">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Offset="0" Color="#F8FAFC" />
                        <GradientStop Offset="1" Color="#E2E8F0" />
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <!--  Main Content Area  -->
        <ContentControl
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Content="{Binding CurrentViewModel}">
            <!--  Smooth transition animation  -->
            <ContentControl.ContentTemplate>
                <DataTemplate>
                    <Border>
                        <Border.Triggers>
                            <EventTrigger RoutedEvent="Loaded">
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation
                                            AccelerationRatio="0.2"
                                            Storyboard.TargetProperty="Opacity"
                                            From="0"
                                            To="1"
                                            Duration="0:0:0.3" />
                                        <ThicknessAnimation
                                            AccelerationRatio="0.2"
                                            Storyboard.TargetProperty="Margin"
                                            From="0,20,0,0"
                                            To="0,0,0,0"
                                            Duration="0:0:0.3" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Border.Triggers>
                        <ContentPresenter Content="{Binding}" />
                    </Border>
                </DataTemplate>
            </ContentControl.ContentTemplate>
        </ContentControl>

        <!--  Status Bar (Optional)  -->
        <StatusBar
            Height="24"
            VerticalAlignment="Bottom"
            Background="#F1F5F9"
            BorderBrush="#E2E8F0"
            BorderThickness="0,1,0,0">
            <StatusBarItem>
                <TextBlock
                    FontSize="11"
                    Foreground="#64748B"
                    Text="Ready" />
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock FontSize="11" Foreground="#64748B">
                    <Run Text="Connected • " />
                    <Run Text="{Binding Source={x:Static system:DateTime.Now}, Mode=OneTime, StringFormat='yyyy-MM-dd HH:mm'}" />
                </TextBlock>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>